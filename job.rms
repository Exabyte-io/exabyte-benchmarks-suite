#!/bin/bash

#PBS -N {{ NAME }}
#PBS -j oe
#PBS -R n
#PBS -r n
#PBS -q {{ QUEUE }}
#PBS -l nodes={{ NODES }}
#PBS -l ppn={{ PPN }}
#PBS -l walltime={{ WALLTIME }}
#PBS -m {{ NOTIFY }}
#PBS -M {{ EMAIL }}

module add {{ MODULE }}
cd $PBS_O_WORKDIR

start=`date +%s`

{{ COMMAND }}

end=`date +%s`
echo $((end-start)) > {{ RUNTIME_FILE }}

# This is to keep track of underlying hardware
cat /proc/cpuinfo > {{ CPU_INFO_FILE }}
cat /proc/meminfo > {{ MEM_INFO_FILE }}
