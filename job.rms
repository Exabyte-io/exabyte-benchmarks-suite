#!/bin/bash

## Below are resource manager directives.
## Replace them with directives for your system (e.g. #PBS), if needed.
# https://slurm.schedmd.com/rosetta.pdf

#SBATCH --job-name={{ NAME }}
#SBATCH --no-requeue
#SBATCH --partition={{ QUEUE }}
#SBATCH --nodes={{ NODES }}
#SBATCH --ntasks-per-node={{ PPN }}
#SBATCH --time={{ WALLTIME }}
#SBATCH --mail-type {{ NOTIFY }}
#SBATCH --mail-user={{ EMAIL }}

cd $SLURM_SUBMIT_DIR

## The use of environment modules is assumed below.
## Replace the directive with your system convention if modules are not installed.

## DO NOT MODIFY LINES BELOW HERE

{{ ENVIRONMENT }}

start=`date +%s`

{{ COMMAND }}

## Store benchmark runtime
end=`date +%s`
echo $((end-start)) > {{ RUNTIME_FILE }}

## Store CPU and Memory information
cat /proc/cpuinfo > {{ CPU_INFO_FILE }}
cat /proc/meminfo > {{ MEM_INFO_FILE }}
